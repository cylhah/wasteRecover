<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.cbb.wasteRecovery.dao.CollectorDao">
<resultMap type="org.cbb.wasteRecovery.bean.Collector" id="Collect">
  <id property="id" column="id"/>
  <result property="name" column="name"/>
  <result property="sex" column="sex"/>
  <result property="password" column="password"/>
  <result property="avater" column="avater"/>
  <result property="email" column="email"/>
  <result property="phoneNumber" column="phoneNumber"/>
  <result property="photo" column="photo"/> 
  <result property="idCardNum" column="idCardNum"/>
  <result property="idCardFrontPhoto" column="idCardFrontPhoto"/>
  <result property="idCardBackPhoto" column="idCardBackPhoto"/>
   <result property="volume" column="volume"/>
  <result property="creditValue" column="creditValue"/> 
  <result property="bankAccount" column="bankAccount"/> 
  <result property="state" column="state"/> 
  <result property="createTime" column="createTime"/> 
  <result property="locationX" column="locationX"/>
  <result property="locationY" column="locationY"/>
  <result property="geoHash" column="geoHash"/>
   <collection property="orderformList" resultMap="org.cbb.wasteRecovery.dao.OrderformDao.order"/>

</resultMap>

    <insert id="InsertCollector">

    insert  into collector(name,sex,password,phoneNumber,photo,idCardNum,idCardFrontPhoto,idCardBackPhoto,createTime,avater,email,bankAccount,state,creditValue,volume)
    values (#{name},#{sex},#{password},#{phoneNumber},#{photo},#{idCardNum},#{idCardFrontPhoto},#{idCardBackPhoto},#{createTime},#{avater},#{email},#{bankAccount},#{state},#{creditValue},#{volume})
   </insert>

    <sql id="columns">o.id,o.uid,o.cid,o.eid,o.aid,o.state,o.weight,o.createTime,o.appointSTime,o.appointETime,o.price,o.staid,c.name,c.sex, c.avater,c.email,c.phoneNumber,c.photo,c.creditValue,c.bankAccount,c.idCardNum,c.state,c.id</sql>

    <select id="selectById" resultMap="Collect" parameterType="int">
        select <include refid="columns"/>
        from collector c
        INNER JOIN orderform o
        where
           c.id=#{id}
          
        
    </select>

    <select id="selectByPhoneNum" resultMap="Collect" parameterType="String">
        select <include refid="columns"/>
        from collector c
        INNER JOIN orderform o
        where
           c.phoneNumber=#{phoneNumber}
          
        
    </select>
    
     <select id="selectByPhoneNumAndPass" resultMap="Collect" parameterType="org.cbb.wasteRecovery.bean.Collector">
        select <include refid="columns"/>
        from collector c
        INNER JOIN orderform o
        where
           c.phoneNumber=#{phoneNumber}
        and c.password=#{password}
        
    </select>

    <select id="selectByIdCardNum" resultMap="Collect" parameterType="String">
        select <include refid="columns"/>
        from collector c
        INNER JOIN orderform o
        where
           c.idCardNum=#{idCardNum}
          
        
    </select>
    
    <select id="selectByName" resultMap="Collect" parameterType="String">
        select <include refid="columns"/>
        from collector c
        INNER JOIN orderform o
        where
          c.name=#{name}
        order by c.id
          
        
    </select>
    
      <select id="selectByState" resultMap="Collect" parameterType="int">
        select <include refid="columns"/>
        from collector c
        INNER JOIN orderform o
        where
           c.state=#{state}
        order by c.id
        
    </select>
    

    
    <update id="updatePhoneNum">
       
        update
          collector
        set
          phoneNumber = #{phoneNumber}
        where
          id = #{id}
      
    </update>
    
    <update id="updatePassword">
       
        update
          collector
        set
          password = #{password}
        where
          id = #{id}
      
    </update>
    
    <update id="updateCreditValue">
       
        update
          collector
        set
          creditValue = #{creditValue}
        where
          id = #{id}
      
    </update>
    
      <update id="updateAccount">
       
        update
          collector
        set
          bankAccount = #{bankAccount}
        where
          id = #{id}
      
    </update>
    
    <update id="addVolume">
       
        update
          collector
        set
          volume = #{volume}
        where
          id = #{id}
      
    </update>
    
    <update id="updatePersonData">
       
        update
          collector
        set
           bankAccount = #{bankAccount},
           phoneNumber = #{phoneNumber},
           password = #{password},
           name=#{name},
           sex=#{sex},
           email=#{email},
           avater=#{avater}
        where
          id = #{id}
       
    </update>
</mapper>